<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Submitting a patch in Linux Kernel | OpenSource</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https:/docsopensource.github.io//docs/Share Things With Community/3.8_Submit_Patch_To_Linux_kernel"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Submitting a patch in Linux Kernel | OpenSource"><meta data-react-helmet="true" name="description" content="Linux Kernel"><meta data-react-helmet="true" property="og:description" content="Linux Kernel"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https:/docsopensource.github.io//docs/Share Things With Community/3.8_Submit_Patch_To_Linux_kernel"><link data-react-helmet="true" rel="alternate" href="https:/docsopensource.github.io//docs/Share Things With Community/3.8_Submit_Patch_To_Linux_kernel" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https:/docsopensource.github.io//docs/Share Things With Community/3.8_Submit_Patch_To_Linux_kernel" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5f5193cc.css">
<link rel="preload" href="/assets/js/runtime~main.a57917b9.js" as="script">
<link rel="preload" href="/assets/js/main.53135cbe.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/open_source.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/open_source.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">OpenSource</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/Background/background">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Background</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started With OpenSource</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Share things with community</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Share Things With Community/3.0_Participating_in_Open_Source_Communities">Participating in Open Source Communities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Share Things With Community/3.1_Github_Best_Practices">Git/Github Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Share Things With Community/3.2_Customising_GitHub_Profile">Customizing your profile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Share Things With Community/3.4_List_Of_Open_Source_Events">List of Open Source Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Share Things With Community/3.5_Git_Cheat_Sheet">Git Cheat Sheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Share Things With Community/3.6_Finding_Github_Issues">Finding Github Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Share Things With Community/3.7_Youtube_Video_links_for_Beginners">Resources To Get Started with Open Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Share Things With Community/3.8_Submit_Patch_To_Linux_kernel">Submitting a patch in Linux Kernel</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">OpenSource Programs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CNCF Projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Popular Projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">License</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Miscellaneous</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Submitting a patch in Linux Kernel</h1></header><h3 class="anchor anchorWithStickyNavbar_y2LR" id="linux-kernel">Linux Kernel<a aria-hidden="true" class="hash-link" href="#linux-kernel" title="Direct link to heading">​</a></h3><p>The Linux Kernel is the main part of a Linux Operating System connecting the hardware and software parts of a computer system.</p><p>The main functions of the kernel are as follows:</p><ol><li><strong><em>Memory Management</em></strong> : It manages memory being used by different processes.</li><li><strong><em>Process Management</em></strong> : Determines the time to be alloted for each process by the Central Processing Unit(CPU).</li><li><strong><em>Device Drivers</em></strong> : Connects between hardware and processes.</li><li><strong><em>System Security and Calls</em></strong> : Receive requests for services from processes.</li></ol><p><img src="https://media.geeksforgeeks.org/wp-content/uploads/Linux_Subsystem.png" alt="Linux Kernel Subsystem" title="Linux_Kernel_Subsystem"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="what-is-a-patch">What is a patch?<a aria-hidden="true" class="hash-link" href="#what-is-a-patch" title="Direct link to heading">​</a></h3><p>A patch is a small text document containing a delta of changes between two different versions of a source tree. Patches are created with the &#x27;diff&#x27; program.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="submitting-first-patch">Submitting First Patch<a aria-hidden="true" class="hash-link" href="#submitting-first-patch" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setting-up-gmail">Setting up gmail<a aria-hidden="true" class="hash-link" href="#setting-up-gmail" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI console"><pre tabindex="0" class="prism-code language-console codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Gmail --&gt; Settings --&gt; Forwarding POP/IMAP --&gt; Enable IMAP --&gt; Save Changes</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Goto Bottom of page --&gt; Configuration instructions --&gt; Copy the outgoing mail server information to paste it into the .esmtprc file in the next section</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="esmtp-file-configuration">esmtp file configuration<a aria-hidden="true" class="hash-link" href="#esmtp-file-configuration" title="Direct link to heading">​</a></h3><b>Announcement</b>: If you already have another mail transfer agent (MTA) installed, installing esmtp is not required. Instead, change the .muttrc file &quot;sendmail&quot; line to be the path to your MTA. Mutt uses ssmtp by default, so if your MTA is ssmtp, you can leave that line out entirely.<p>First create a .esmtprc file with the required permissions:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> ~/.esmtprc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> g-rwx ~/.esmtprc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> o-rwx ~/.esmtprc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><em>Editing the .esmtprc file in the home directory:</em></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">identity </span><span class="token string" style="color:#e3116c">&quot;my.email@gmail.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"> smtp.gmail.com:587</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">username </span><span class="token string" style="color:#e3116c">&quot;my.email@gmail.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password </span><span class="token string" style="color:#e3116c">&quot;Password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">starttls required</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Create a .muttrc file in your home directory</p><p><em>Setting up the mail client(mutt):</em></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">sendmail</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/usr/bin/esmtp&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">envelope_from</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">from</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Your Name &lt;my.email@gmail.com&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">use_from</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">edit_headers</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yes</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="testing-email-setup">Testing email setup<a aria-hidden="true" class="hash-link" href="#testing-email-setup" title="Direct link to heading">​</a></h3><p><em>Sending test email</em></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mutt</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Create inbox -- No. Type &#x27;m&#x27; to create a new message. Specify your own email address (or a secondary email) to send the test message to. Set the Subject however you want to. Type a message in the body, and then save and quit. Hit &#x27;y&#x27; to send the message, hit &#x27;e&#x27; to edit the message again, or hit &#x27;q&#x27; to abort sending the message.</p><p>If mutt is not working, try</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mutt</span><span class="token plain"> -d </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setting-up-git">Setting up git<a aria-hidden="true" class="hash-link" href="#setting-up-git" title="Direct link to heading">​</a></h3><p>Create a .gitconfig file and enter the follwing commands:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Your Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> your.email@example.com</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Make sure that the email you specify here is the same email you used to set up sending mail. The Linux kernel developers will not accept a patch where the &quot;From&quot; email differs from the &quot;Signed-off-by&quot; line, which is what will happen if these two emails do not match.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="exploring-the-kernel-tree">Exploring the Kernel tree<a aria-hidden="true" class="hash-link" href="#exploring-the-kernel-tree" title="Direct link to heading">​</a></h3><p>Open a terminal</p><p>Changing directories to your git checkout:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> git/kernels/staging/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This is the Linux Kernel tree which can be expolored using ls and cd commands.</p><p>Viewing Commit History</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> log</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="update-linux-kernel">Update Linux Kernel<a aria-hidden="true" class="hash-link" href="#update-linux-kernel" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> fetch origin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> log origin/staging-testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> rebase origin/staging-testing</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="configuring-the-kernel">Configuring the Kernel<a aria-hidden="true" class="hash-link" href="#configuring-the-kernel" title="Direct link to heading">​</a></h3><p>The next step is to create a configuration file, compile the new kernel, and install it.</p><p>The first thing to know is that the Linux kernel is completely configurable. Each driver can be separately configured to be installed or not. There are three choices for driver installation:</p><ol><li>disable the driver completely,</li><li>build the driver into the main kernel file (vmlinuz),</li><li>or build it as a module.</li></ol><p>The Linux kernel make system uses a special file called .config that stores what drivers are compiled in, or compiled as modules. Most Linux distributions store the .config file they used to compile your distro kernel in the /boot/ directory</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="compile-the-kernel">Compile the Kernel<a aria-hidden="true" class="hash-link" href="#compile-the-kernel" title="Direct link to heading">​</a></h3><p>Next, you&#x27;ll need to run &quot;make&quot; to compile your new kernel. Optionally, &quot;make&quot; can take a flag that indicates how many threads to spawn to start separate compilations. Usually you want to pick a number that is equal to the number of CPUs you have in your machine. For example, if you had a dual core system, you would run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> -j2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="driver-change">Driver Change<a aria-hidden="true" class="hash-link" href="#driver-change" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="for-linux-on-virtual-machine-in-your-pc">For Linux on Virtual Machine in your PC<a aria-hidden="true" class="hash-link" href="#for-linux-on-virtual-machine-in-your-pc" title="Direct link to heading">​</a></h3><p>The e1000 driver is found in the networking portion of the kernel:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">intern@ubuntu:~/git/kernels/staging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> drivers/net/ethernet/intel/e1000/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e1000_ethtool.c  e1000.h  e1000_hw.c  e1000_hw.h  e1000_main.c  e1000_osdep.h  e1000_param.c  Makefile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let&#x27;s make a small change to the probe function of the e1000 driver. A probe function is called when the driver is loaded. Let&#x27;s edit e1000_main.c:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> drivers/net/ethernet/intel/e1000/e1000_main.c</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Next, find the probe function. You can search for text by typing &#x27;/&#x27; in standard mode. Once you&#x27;ve found the probe function, add a printk line to it: </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">static int e1000_probe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">struct pci_dev *pdev, const struct pci_device_id *ent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         struct net_device *netdev</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         struct e1000_adapter *adapter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         struct e1000_hw *hw</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       printk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KERN_DEBUG </span><span class="token string" style="color:#e3116c">&quot;I can modify the Linux kernel!</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         static int cards_found </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then type <code>:wq &lt;enter&gt;</code> to save the file and quit.</p><p>A printk function causes a message to be written to the kernel log buffer, which can then be viewed using the dmesg command.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="on-native-linux">On Native Linux<a aria-hidden="true" class="hash-link" href="#on-native-linux" title="Direct link to heading">​</a></h3><p>Use lsmod to see what drivers are loaded, and pick a name from that list to modify. If you have a variant of the e1000 driver, like e1000e, you may want to use that. Or you can find your wireless driver and modify that. Then apply the method described previously to modify, change or update the driver.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="compile-install-test">Compile, install, test<a aria-hidden="true" class="hash-link" href="#compile-install-test" title="Direct link to heading">​</a></h3><p>Recompile your kernel, by running make (with an optional -jN flag):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> -j2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You may need to fix some compilation errors.</p><p>After you&#x27;ve compiled the driver, you need to install your changes by running:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> modules_install </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Since you&#x27;ve compiled a completely new kernel, you need to reboot into that new kernel in order to test your module changes. Reboot your VM (or computer), and then run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">dmesg</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">less</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="submitting-the-patch">Submitting the Patch<a aria-hidden="true" class="hash-link" href="#submitting-the-patch" title="Direct link to heading">​</a></h3><p>The first step to sending a patch is to figure out who to send it to. For this, you need to find the maintainer of the code you&#x27;re patching, and Cc the correct mailing list. If you simply send it off to LKML, it will get ignored.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> show --pretty</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">oneline --abbrev-commit HEAD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cb9a537 staging: most: constify snd_pcm_ops structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> --git a/drivers/staging/most/aim-sound/sound.c b/drivers/staging/most/aim-s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 9c64580</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">21fa0df </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/drivers/staging/most/aim-sound/sound.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/drivers/staging/most/aim-sound/sound.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -457,7 +457,7 @@ static snd_pcm_uframes_t pcm_pointer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">struct snd_pcm_substrea</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Initialization of struct snd_pcm_ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-static struct snd_pcm_ops pcm_ops </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+static const struct snd_pcm_ops pcm_ops </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .open       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pcm_open,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .close      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pcm_close,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .ioctl      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> snd_pcm_lib_ioctl,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> show HEAD </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> perl scripts/get </span><span class="token variable" style="color:#36acaa">$$</span><span class="token plain">_ maintainer.pl --separator , --nokeywords --nogit --nogit-fallback --norolestats --nol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Greg Kroah-Hartman </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">gregkh@linuxfoundation.org</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">,devel@driverdev.osuosl.org,linux-kernel@vger.kernel.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ perl scripts/get_maintainer.pl --separator , --nokeywords --nogit --nogit-fallback --norolestats --nol -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drivers/staging/most/aim-sound/sound.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Greg Kroah-Hartman </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">gregkh@linuxfoundation.org</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="creating-and-sending-a-patch-with-mutt">Creating and Sending a Patch with mutt<a aria-hidden="true" class="hash-link" href="#creating-and-sending-a-patch-with-mutt" title="Direct link to heading">​</a></h3><p>First, create a patch that describes the change, using <code>git format-patch</code>. That command takes a starting commit ID (and optionally) an ending commit ID, in order to create patches for the commit after the starting commit ID.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> format-patch -o /tmp/ HEAD^</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Sending</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mutt</span><span class="token plain"> -H /tmp/0001-whatever your filename is</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>So this was all you need to know about sending patch to linux kernel .</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="happy-learning-">HAPPY LEARNING 😎🙌<a aria-hidden="true" class="hash-link" href="#happy-learning-" title="Direct link to heading">​</a></h3></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Share Things With Community/3.7_Youtube_Video_links_for_Beginners"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Resources To Get Started with Open Source</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/OpenSource Programs/4.1_MLH_Fellowship"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">MLH Fellowship<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#linux-kernel" class="table-of-contents__link toc-highlight">Linux Kernel</a></li><li><a href="#what-is-a-patch" class="table-of-contents__link toc-highlight">What is a patch?</a></li><li><a href="#submitting-first-patch" class="table-of-contents__link toc-highlight">Submitting First Patch</a><ul><li><a href="#setting-up-gmail" class="table-of-contents__link toc-highlight">Setting up gmail</a></li><li><a href="#esmtp-file-configuration" class="table-of-contents__link toc-highlight">esmtp file configuration</a></li><li><a href="#testing-email-setup" class="table-of-contents__link toc-highlight">Testing email setup</a></li><li><a href="#setting-up-git" class="table-of-contents__link toc-highlight">Setting up git</a></li><li><a href="#exploring-the-kernel-tree" class="table-of-contents__link toc-highlight">Exploring the Kernel tree</a></li><li><a href="#update-linux-kernel" class="table-of-contents__link toc-highlight">Update Linux Kernel</a></li><li><a href="#configuring-the-kernel" class="table-of-contents__link toc-highlight">Configuring the Kernel</a></li><li><a href="#compile-the-kernel" class="table-of-contents__link toc-highlight">Compile the Kernel</a></li></ul></li><li><a href="#driver-change" class="table-of-contents__link toc-highlight">Driver Change</a><ul><li><a href="#for-linux-on-virtual-machine-in-your-pc" class="table-of-contents__link toc-highlight">For Linux on Virtual Machine in your PC</a></li><li><a href="#on-native-linux" class="table-of-contents__link toc-highlight">On Native Linux</a></li><li><a href="#compile-install-test" class="table-of-contents__link toc-highlight">Compile, install, test</a></li><li><a href="#submitting-the-patch" class="table-of-contents__link toc-highlight">Submitting the Patch</a></li><li><a href="#creating-and-sending-a-patch-with-mutt" class="table-of-contents__link toc-highlight">Creating and Sending a Patch with mutt</a></li><li><a href="#happy-learning-" class="table-of-contents__link toc-highlight">HAPPY LEARNING 😎🙌</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">OpenSource</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/docsopensource/docsopensource.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/girlscript/winter-of-contributing/graphs/contributors" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Contributors<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">GWOC Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/girlscript/winter-of-contributing" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/girlscriptwoc?t=wQYmJKKM0e6hJI5UllXe4w&amp;s=09" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/girlscript-winter-of-contributing/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Aryamanz29" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Domain Supervisor<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/girlscript/winter-of-contributing" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Winter Of Contributing Repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Made With ❤ By <a href="https://github.com/Aryamanz29"><strong>AryamanZ29</strong> </a> </div></div></div></footer></div>
<script src="/assets/js/runtime~main.a57917b9.js"></script>
<script src="/assets/js/main.53135cbe.js"></script>
</body>
</html>