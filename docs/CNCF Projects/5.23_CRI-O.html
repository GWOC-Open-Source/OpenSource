<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">CRI-O | OpenSource</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https:/docsopensource.github.io//docs/CNCF Projects/5.23_CRI-O"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="CRI-O | OpenSource"><meta data-react-helmet="true" name="description" content="CRI-O logo"><meta data-react-helmet="true" property="og:description" content="CRI-O logo"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https:/docsopensource.github.io//docs/CNCF Projects/5.23_CRI-O"><link data-react-helmet="true" rel="alternate" href="https:/docsopensource.github.io//docs/CNCF Projects/5.23_CRI-O" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https:/docsopensource.github.io//docs/CNCF Projects/5.23_CRI-O" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5f5193cc.css">
<link rel="preload" href="/assets/js/runtime~main.a57917b9.js" as="script">
<link rel="preload" href="/assets/js/main.53135cbe.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/open_source.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/open_source.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">OpenSource</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/Background/background">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Background</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started With OpenSource</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Share things with community</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">OpenSource Programs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">CNCF Projects</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.1_DragonFly">Dragonfly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.2_Kubernetes">Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.3_NATS">NATS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.4_Docker">Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.5_Terraform">Terraform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.6_Prometheus">Prometheus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.7_Vitess">Vitess</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.8_Rook">Cloud-Native Storage Orchestrator: Rook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.9_Jaeger">Jaeger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.10_Fluentd">Fluentd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.11_Envoy">Envoy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.12_Containerd">Containerd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.13_Harbor">Harbor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.14_TUF">The Update Framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.15_etcd">ETCD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.16_Open_Policy_Agent">Open Policy Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.17_TiKV">TiKV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.18_Linkerd">Linkerd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.19_argo">ARGO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.20_Buildpacks">Buildpacks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.21_CloudEvents">CloudEvents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.22_CNI">CNI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/CNCF Projects/5.23_CRI-O">CRI-O</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.24_Falco">FALCO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.25_Flux">Flux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.26_KubeEdge">KubeEdge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.27_OpenTelemetry">Open Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.28_Spiffe">SPIFFE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.29_SPIRE">SPIRE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.30_Thanos">Thanos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.31_Contour">Contour</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.32_Cortex">Cortex: An open source platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.33_CrossPlane">CrossPlane</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.34_Flagger">Flagger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.35_gRPC">gRPC(Remote Procedure call)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.36_KEDA">KEDA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.37_Notary">Notary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.38_OperatorFramework">Operator Framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.39_Helm">HELM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.40_CoreDNS">CoreDNS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CNCF Projects/5.41_CNCF">CNCF</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Popular Projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">License</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Miscellaneous</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CRI-O</h1></header><p><img src="https://github.com/cri-o/cri-o/blob/main/logo/crio-logo.svg?raw=true" alt="CRI-O logo"></p><p>CRI-O is an implementation of the Kubernetes CRI (Container Runtime Interface) to enable using OCI (Open Container Initiative) compatible runtimes. It is a lightweight alternative to using Docker as the runtime for kubernetes. It allows Kubernetes to use any OCI-compliant runtime as the container runtime for running pods. Today it supports runc and Kata Containers as the container runtimes but any OCI-conformant runtime can be plugged in principle.</p><p>CRI-O supports OCI container images and can pull from any container registry. It is a lightweight alternative to using Docker, Moby or rkt as the runtime for Kubernetes.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="what-is-kubernetes">What is Kubernetes?<a aria-hidden="true" class="hash-link" href="#what-is-kubernetes" title="Direct link to heading">​</a></h2><p><img src="https://user-images.githubusercontent.com/65653459/134172386-a0b810c3-1b26-418c-ae64-08e5ad7cedce.png" alt="index"></p><p>Kubernetes is a portable, extensible, open-source platform for managing containerized workloads and services, that facilitates both declarative configuration and automation. It has a large, rapidly growing ecosystem. Kubernetes services, support, and tools are widely available.</p><p>Google open-sourced the Kubernetes project in 2014. Kubernetes combines over 15 years of Google&#x27;s experience running production workloads at scale with best-of-breed ideas and practices from the community.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="what-is-the-cri-and-why-does-kubernetes-need-it">What is the CRI and why does Kubernetes need it?<a aria-hidden="true" class="hash-link" href="#what-is-the-cri-and-why-does-kubernetes-need-it" title="Direct link to heading">​</a></h2><p><img src="https://user-images.githubusercontent.com/65653459/134172150-77e54931-00bd-4bab-982c-4fa274bb513d.png" alt="CRI"></p><p>Each container runtime has it own strengths, and many users have asked for Kubernetes to support more runtimes. In the Kubernetes 1.5 release, kubernetes introduced the Container Runtime Interface (CRI) -- a plugin interface which enables kubelet to use a wide variety of container runtimes, without the need to recompile. CRI consists of a protocol buffers and gRPC API, and libraries, with additional specifications and tools under active development. </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="what-is-oci">What is OCI?<a aria-hidden="true" class="hash-link" href="#what-is-oci" title="Direct link to heading">​</a></h2><p><img src="https://user-images.githubusercontent.com/65653459/134172022-e1b3a236-6e4d-436c-9b75-5bd027bcfb6e.jpg" alt="Open_Container_Initiative_Logo"></p><p>The Open Container Initiative (OCI) is a lightweight, open governance structure (project), formed under the auspices of the Linux Foundation, for the express purpose of creating open industry standards around container formats and runtime. The OCI was launched on June 22nd 2015 by Docker, CoreOS and other leaders in the container industry.</p><p>The OCI currently contains two specifications: the Runtime Specification (runtime-spec) and the Image Specification (image-spec). The Runtime Specification outlines how to run a “filesystem bundle” that is unpacked on disk. At a high-level an OCI implementation would download an OCI Image then unpack that image into an OCI Runtime filesystem bundle. At this point the OCI Runtime Bundle would be run by an OCI Runtime.</p><header><h1>Changes in Kubernetes Workflow Recently</h1></header><p>Kubernetes has deprecated the support for Dockershim to optimise the workflow. Now, Kubelet can directly interact with containerd or any other container runtime interface such as CRI-O.</p><p><img src="https://user-images.githubusercontent.com/65653459/134171608-7862da22-3a6d-424d-b1de-9f575075f6d2.jpg" alt="BLOG INSIDE-1"></p><header><h1>containerd</h1></header><p>containerd is a high-level container runtime that came from Docker, and implements the CRI spec. It pulls images from registries, manages them and then hands over to a lower-level runtime, which actually creates and runs the container processes.</p><p>containerd was separated out of the Docker project, to make Docker more modular.</p><p>So Docker uses containerd internally itself. When you install Docker, it will also install containerd.</p><p>containerd implements the Kubernetes Container Runtime Interface (CRI), via its cri plugin.</p><header><h1>CRI-O</h1></header><p>CRI-O is a high-level container runtime which implements the Container Runtime Interface (CRI). It’s an alternative to containerd. It pulls container images from registries, manages them on disk, and launches a lower-level runtime to run container processes.</p><p>It was specifically created from the ground up as a container runtime for Kubernetes as Kubernetes has deprecated it&#x27;s support for dockershim. It provides the ability to start, stop and restart containers, just like containerd.</p><header><h1>Contributors</h1></header><p><img src="https://user-images.githubusercontent.com/65653459/134026544-8a5768ff-1cfa-4f17-823b-41b26531adbc.PNG" alt="Contributors"></p><p>CRI-O is developed by maintainers and contributors from these companies and others. It is a community-driven, open source project. Feedback, users, and of course, contributors, are always welcome via the <a href="https://github.com/cri-o/cri-o" target="_blank" rel="noopener noreferrer">cri-o/cri-o</a> GitHub project.</p><header><h1>Architecture</h1></header><p><img src="https://user-images.githubusercontent.com/65653459/133961894-4a64f03b-77d5-45fe-a2e3-a3535ea8c915.png" alt="architecture"></p><p>The architectural components are as follows:</p><ul><li>Kubernetes contacts the kubelet to launch a pod.<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">- Pods are a kubernetes concept consisting of one or more containers sharing the same IPC, NET and PID `namespaces` and living in the same cgroup.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>The kubelet forwards the request to the CRI-O daemon VIA kubernetes CRI (Container runtime interface) to launch the new POD.</li><li>CRI-O uses the <code>containers/image</code> library to pull the image from a container registry.</li><li>The downloaded image is unpacked into the container’s root filesystems, stored in COW file systems, using containers/storage library.</li><li>After the rootfs has been created for the container, CRI-O generates an OCI runtime specification json file describing how to run the container using the OCI Generate tools.</li><li>CRI-O then launches an OCI Compatible Runtime using the specification to run the container proceses. The default OCI Runtime is runc.</li><li>Each container is monitored by a separate <code>conmon</code> process. The conmon process holds the pty of the PID1 of the container process. It handles logging for the container and records the exit code for the container process.</li><li>Networking for the pod is setup through use of <img src="https://github.com/containernetworking/cni" alt="CNI">, so any CNI plugin can be used with CRI-O.</li></ul><header><h1>Components</h1></header><p>CRI-O is made up of several components that are found in different GitHub repositories.</p><ul><li><a href="#OCIcompatibleruntimes">OCI compatible runtime</a></li><li><a href="#Storage">containers/storage</a></li><li><a href="#Containerimages">containers/image</a></li><li><a href="#Networking">networking (CNI)</a></li><li><a href="#Monitoring">container monitoring (conmon)</a></li><li>Security is provided by several core Linux capabilities</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="oci-compatible-runtimes">OCI compatible runtimes<a aria-hidden="true" class="hash-link" href="#oci-compatible-runtimes" title="Direct link to heading">​</a></h3><p>CRI-O supports any <img src="https://github.com/opencontainers/runtime-tools" alt="OCI compatible runtime">. They test with runc and Clear Containers today.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="storage">Storage<a aria-hidden="true" class="hash-link" href="#storage" title="Direct link to heading">​</a></h3><p>The <img src="https://github.com/containers/storage" alt="containers/storage"> library is used for managing layers and creating root file-systems for the containers in a pod: <code>Overlayfs</code>, <code>devicemapper</code>, <code>AUFS</code> and <code>btrfs</code> are implemented, with <code>Overlayfs</code> as the default driver.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="container-images">Container images<a aria-hidden="true" class="hash-link" href="#container-images" title="Direct link to heading">​</a></h3><p>The <img src="https://github.com/containers/image" alt="containers/image"> library is used for pulling images from registries. Currently, it supports Docker <img src="https://docs.docker.com/registry/spec/manifest-v2-1/" alt="schema 2/version 1"> as well as <img src="https://docs.docker.com/registry/spec/manifest-v2-2/" alt="schema 2/version 2">. It also passes all Docker and Kubernetes tests.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="networking">Networking<a aria-hidden="true" class="hash-link" href="#networking" title="Direct link to heading">​</a></h3><p>The Container Network Interface <img src="https://github.com/containernetworking/cni" alt="CNI"> is used for setting up networking for the pods. Various CNI plugins such as Flannel, Weave and OpenShift-SDN have been tested with CRI-O and are working as expected.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="monitoring">Monitoring<a aria-hidden="true" class="hash-link" href="#monitoring" title="Direct link to heading">​</a></h3><p><img src="https://github.com/cri-o/cri-o/tree/master/conmon" alt="conmon"> is a utility within CRI-O that is used to monitor the containers, handle logging from the container process, serve attach clients and detects Out Of Memory (OOM) situations.</p><header><h1>Security</h1></header><p>Container security separation policies are provided by a series of tools including SELinux, Capabilities, seccomp, and other security separation policies as specified in the OCI Specification.</p><header><h1>CRI-O Installation Instructions</h1></header><p>This guide will walk you through the installation of <a href="https://github.com/cri-o/cri-o" target="_blank" rel="noopener noreferrer">CRI-O</a>, an Open Container Initiative-based implementation of the <a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/node/container-runtime-interface-v1.md" target="_blank" rel="noopener noreferrer">Kubernetes Container Runtime Interface</a>.
It is assumed you are running a Linux machine.</p><p><strong>Table of Contents</strong>:</p><ul><li><a href="#install-packaged-versions-of-cri-o">Install packaged versions of CRI-O</a><ul><li><a href="#supported-versions">Supported versions</a></li><li><a href="#installation-instructions">Installation Instructions</a><ul><li><a href="#openSUSE">openSUSE</a></li><li><a href="#fedora-31-or-later">Fedora 31 or later</a></li><li><a href="#other-yum-based-operating-systems">Other yum based operating systems</a></li><li><a href="#apt-based-operating-systems">APT based operating systems</a></li></ul></li></ul></li><li><a href="#build-and-install-cri-o-from-source">Build and install CRI-O from source</a><ul><li><a href="#runtime-dependencies">Runtime dependencies</a></li><li><a href="#build-and-run-dependencies">Build and Run Dependencies</a><ul><li><a href="#fedora---rhel-7---centos">Fedora - RHEL 7 - CentOS</a></li><li><a href="#rhel-8">RHEL 8</a></li><li><a href="#debian---raspbian---ubuntu">Debian - Raspbian - Ubuntu</a></li></ul></li><li><a href="#get-source-code">Get Source Code</a></li><li><a href="#build">Build</a><ul><li><a href="#install-with-ansible">Install with Ansible</a></li><li><a href="#build-tags">Build Tags</a></li></ul></li><li><a href="#static-builds">Static builds</a><ul><li><a href="#creating-a-release-archive">Creating a release archive</a></li></ul></li><li><a href="#download-conmon">Download conmon</a></li><li><a href="#setup-cni-networking">Setup CNI networking</a></li><li><a href="#cri-o-configuration">CRI-O configuration</a><ul><li><a href="#validate-registries-in-registriesconf">Validate registries in registries.conf</a></li><li><a href="#recommended---use-systemd-cgroups">Recommended - Use systemd cgroups.</a></li><li><a href="#optional---modify-verbosity-of-logs">Optional - Modify verbosity of logs</a></li><li><a href="#optional---modify-capabilities-and-sysctls">Optional - Modify capabilities and sysctls</a></li></ul></li><li><a href="#starting-cri-o">Starting CRI-O</a></li><li><a href="#using-cri-o">Using CRI-O</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="install-packaged-versions-of-cri-o">Install packaged versions of CRI-O<a aria-hidden="true" class="hash-link" href="#install-packaged-versions-of-cri-o" title="Direct link to heading">​</a></h2><p>CRI-O builds for native package managers using <a href="/docs/CNCF Projects/build.opensuse.org">openSUSE&#x27;s OBS</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="supported-versions">Supported versions<a aria-hidden="true" class="hash-link" href="#supported-versions" title="Direct link to heading">​</a></h3><p>CRI-O follows the <a href="https://kubernetes.io/docs/setup/release/version-skew-policy/#supported-versions" target="_blank" rel="noopener noreferrer">Kubernetes support cycle</a> of three minor releases.
CRI-O also attempts to package for the following operating systems:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Fedora 31+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openSUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CentOS 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CentOS 8 Stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CentOS 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Debian Unstable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Debian Testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Debian 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rasbian 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xUbuntu 20.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xUbuntu 20.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xUbuntu 18.04</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To install, choose a supported version for your operating system, and export it as a variable, like so:
<code>export VERSION=1.19</code></p><p>We also save releases as subprojects. If you&#x27;d, for instance, like to use <code>1.18.3</code> you can set
<code>export VERSION=1.19:1.19.1</code></p><p>Packaging for CRI-O is done best-effort, and is largely driven by requests.
If there&#x27;s a version or operating system that is missing, please <a href="/docs/CNCF Projects/github.com/cri-o/cri-o/issues/new">open an issue</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-instructions">Installation Instructions<a aria-hidden="true" class="hash-link" href="#installation-instructions" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="opensuse">openSUSE:<a aria-hidden="true" class="hash-link" href="#opensuse" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">zypper</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> cri-o</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="fedora-31-or-later">Fedora 31 or later<a aria-hidden="true" class="hash-link" href="#fedora-31-or-later" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> dnf module </span><span class="token builtin class-name">enable</span><span class="token plain"> cri-o:</span><span class="token variable" style="color:#36acaa">$VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> dnf </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> cri-o</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For Fedora, we only support setting minor versions. i.e: <code>VERSION=1.18</code>, and do not support pinning patch versions: <code>VERSION=1.18.3</code></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="other-yum-based-operating-systems">Other yum based operating systems<a aria-hidden="true" class="hash-link" href="#other-yum-based-operating-systems" title="Direct link to heading">​</a></h4><p>To install on the following operating systems, set the environment variable $OS as the appropriate field in the following table:</p><table><thead><tr><th>Operating system</th><th>$OS</th></tr></thead><tbody><tr><td>Centos 8</td><td><code>CentOS_8</code></td></tr><tr><td>Centos 8 Stream</td><td><code>CentOS_8_Stream</code></td></tr><tr><td>Centos 7</td><td><code>CentOS_7</code></td></tr></tbody></table><p>And then run the following as root:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -L -o /etc/yum.repos.d/devel:kubic:libcontainers:stable.repo https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/</span><span class="token variable" style="color:#36acaa">$OS</span><span class="token plain">/devel:kubic:libcontainers:stable.repo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -L -o /etc/yum.repos.d/devel:kubic:libcontainers:stable:cri-o:</span><span class="token variable" style="color:#36acaa">$VERSION</span><span class="token plain">.repo https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable:cri-o:</span><span class="token variable" style="color:#36acaa">$VERSION</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$OS</span><span class="token plain">/devel:kubic:libcontainers:stable:cri-o:</span><span class="token variable" style="color:#36acaa">$VERSION</span><span class="token plain">.repo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> cri-o</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="apt-based-operating-systems">APT based operating systems<a aria-hidden="true" class="hash-link" href="#apt-based-operating-systems" title="Direct link to heading">​</a></h4><p>Note: this tutorial assumes you have curl and gnupg installed</p><p>To install on the following operating systems, set the environment variable $OS as the appropriate field in the following table:
| Operating system | $OS               |
| ---------------- | ----------------- |
| Debian Unstable  | <code>Debian_Unstable</code> |
| Debian Testing   | <code>Debian_Testing</code>  |
| Raspberry Pi OS  | <code>Raspbian_10</code>     |
| Ubuntu 20.04     | <code>xUbuntu_20.04</code>   |
| Ubuntu 19.10     | <code>xUbuntu_19.10</code>   |
| Ubuntu 19.04     | <code>xUbuntu_19.04</code>   |
| Ubuntu 18.04     | <code>xUbuntu_18.04</code>   |</p><p>If installing cri-o-runc (recommended), you&#x27;ll need to install libseccomp &gt;= 2.4.1. This is not available in distros based on Debian buster or below, so buster backports will need to be enabled:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;deb http://deb.debian.org/debian buster-backports main&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /etc/apt/sources.list.d/backports.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y libseccomp2 </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update -y libseccomp2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And then run the following as root:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/</span><span class="token string variable" style="color:#36acaa">$OS</span><span class="token string" style="color:#e3116c">/ /&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/</span><span class="token string variable" style="color:#36acaa">$VERSION</span><span class="token string" style="color:#e3116c">/</span><span class="token string variable" style="color:#36acaa">$OS</span><span class="token string" style="color:#e3116c">/ /&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /etc/apt/sources.list.d/devel:kubic:libcontainers:stable:cri-o:</span><span class="token variable" style="color:#36acaa">$VERSION</span><span class="token plain">.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -L https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable:cri-o:</span><span class="token variable" style="color:#36acaa">$VERSION</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$OS</span><span class="token plain">/Release.key </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> apt-key </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/</span><span class="token variable" style="color:#36acaa">$OS</span><span class="token plain">/Release.key </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> apt-key </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> cri-o cri-o-runc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note: We include cri-o-runc because Ubuntu and Debian include their own packaged version of runc.
While this version should work with CRI-O, keeping the packaged versions of CRI-O and runc in sync ensures they work together.
If you&#x27;d like to use the distribution&#x27;s runc, you&#x27;ll have to add the file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI toml"><pre tabindex="0" class="prism-code language-toml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">[crio.runtime.runtimes.runc]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">runtime_path = &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">runtime_type = &quot;oci&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">runtime_root = &quot;/run/runc&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>to <code>/etc/crio/crio.conf.d/</code></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="build-and-install-cri-o-from-source">Build and install CRI-O from source<a aria-hidden="true" class="hash-link" href="#build-and-install-cri-o-from-source" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="runtime-dependencies">Runtime dependencies<a aria-hidden="true" class="hash-link" href="#runtime-dependencies" title="Direct link to heading">​</a></h3><ul><li>runc, Clear Containers runtime, or any other OCI compatible runtime</li><li>iproute</li><li>iptables</li></ul><p>Latest version of <code>runc</code> is expected to be installed on the system. It is picked up as the default runtime by CRI-O.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="build-and-run-dependencies">Build and Run Dependencies<a aria-hidden="true" class="hash-link" href="#build-and-run-dependencies" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="fedora---rhel-7---centos">Fedora - RHEL 7 - CentOS<a aria-hidden="true" class="hash-link" href="#fedora---rhel-7---centos" title="Direct link to heading">​</a></h4><p><strong>Required</strong></p><p>Fedora, RHEL 7, CentOS and related distributions:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers-common </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  device-mapper-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glib2-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glibc-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glibc-static </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  go </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gpgme-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libassuan-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libgpg-error-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libseccomp-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libselinux-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pkgconfig </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  runc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Please note</strong>:</p><ul><li><code>CentOS 8</code> (or higher): <code>pkgconfig</code> package is replaced by <code>pkgconf-pkg-config</code></li><li>By default btrfs is not enabled. To add the btrfs support, install the
following package: <code>btrfs-progs-devel</code></li><li>It is possible the distribution packaged version of runc is out of date. If you&#x27;d like to get the latest and greatest runc, consider using the one found in <a href="https://build.opensuse.org/project/show/devel:kubic:libcontainers:stable" target="_blank" rel="noopener noreferrer">https://build.opensuse.org/project/show/devel:kubic:libcontainers:stable</a></li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="rhel-8">RHEL 8<a aria-hidden="true" class="hash-link" href="#rhel-8" title="Direct link to heading">​</a></h4><p>RHEL 8 distributions:\
Make sure you are subscribed to the following repositories: \
BaseOS/x86_64 \
Appstream/x86_64
CodeReady Linux Builder for x86_64</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">subscription-manager repos --enable=rhel-8-for-x86_64-baseos-rpms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subscription-manager repos --enable=rhel-8-for-x86_64-appstream-rpms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subscription-manager repos --enable=codeready-builder-for-rhel-8-x86_64-rpms</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Follow the guide below to subscribe to the repositories if not already subscribed:\
<a href="https://access.redhat.com/solutions/265523" target="_blank" rel="noopener noreferrer">https://access.redhat.com/solutions/265523</a></p><p>This requires go version 1.12 or greater:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">yum module -y install go-toolset</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers-common </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  device-mapper-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glib2-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glibc-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glibc-static </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  runc </span><span class="token punctuation" style="color:#393A34">\</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here is a link on how to install a source rpm on RHEL: \
<a href="https://www.itechlounge.net/2012/12/linux-how-to-install-source-rpm-on-rhelcentos/" target="_blank" rel="noopener noreferrer">https://www.itechlounge.net/2012/12/linux-how-to-install-source-rpm-on-rhelcentos/</a></p><p>Dependency: gpgme-devel \
Link: <a href="http://download.eng.bos.redhat.com/brewroot/packages/gpgme/1.10.0/6.el8/x86_64/" target="_blank" rel="noopener noreferrer">http://download.eng.bos.redhat.com/brewroot/packages/gpgme/1.10.0/6.el8/x86_64/</a></p><p>Dependency: go-md2man \
Command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">go get github.com/cpuguy83/go-md2man</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The following dependencies:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  libassuan </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libassuan-devel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libgpg-error </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libseccomp </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libselinux </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pkgconf-pkg-config </span><span class="token punctuation" style="color:#393A34">\</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="debian---raspbian---ubuntu">Debian - Raspbian - Ubuntu<a aria-hidden="true" class="hash-link" href="#debian---raspbian---ubuntu" title="Direct link to heading">​</a></h4><p>On Debian, Raspbian and Ubuntu distributions, <a href="/docs/README.md#installing-crio">enable the Kubic project
repositories</a> and install the following packages:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update -qq </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  btrfs-tools </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers-common </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  golang-go </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libassuan-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libdevmapper-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libglib2.0-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libc6-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libgpgme11-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libgpg-error-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libseccomp-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libsystemd-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libselinux1-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pkg-config </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  go-md2man </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cri-o-runc </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libudev-dev </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  software-properties-common </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gcc </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">make</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Caveats and Notes:</strong></p><p>If using an older release or a long-term support release, be careful to double-check that the version of <code>runc</code> is new enough (running <code>runc --version</code> should produce <code>spec: 1.0.0</code>), or else build your own.</p><p>Be careful to double-check that the version of golang is new enough, version
1.12.x or higher is required. If needed, newer golang versions are available at
<a href="https://golang.org/dl" target="_blank" rel="noopener noreferrer">the official download website</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="get-source-code">Get Source Code<a aria-hidden="true" class="hash-link" href="#get-source-code" title="Direct link to heading">​</a></h3><p>Clone the source code using:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/cri-o/cri-o </span><span class="token comment" style="color:#999988;font-style:italic"># or your fork</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> cri-o</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Make sure your <code>CRI-O</code> and <code>kubernetes</code> versions are of matching major versions.
For instance, if you want to be compatible with the latest kubernetes release,
you&#x27;ll need to use the latest tagged release of <code>CRI-O</code> on branch <code>release-1.18</code>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="build">Build<a aria-hidden="true" class="hash-link" href="#build" title="Direct link to heading">​</a></h3><p>To install with default buildtags using seccomp, use:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Otherwise, if you do not want to build <code>CRI-O</code> with seccomp support you can add <code>BUILDTAGS=&quot;&quot;</code> when running make.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">BUILDTAGS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="install-with-ansible">Install with Ansible<a aria-hidden="true" class="hash-link" href="#install-with-ansible" title="Direct link to heading">​</a></h4><p>An <a href="https://github.com/alvistack/ansible-role-cri_o" target="_blank" rel="noopener noreferrer">Ansible Role</a> is also available to automate the above steps:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">su</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p ~/.ansible/roles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ~/.ansible/roles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/alvistack/ansible-role-cri_o.git cri_o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ~/.ansible/roles/cri_o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip3 </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --upgrade --ignore-installed --requirement requirements.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">molecule converge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">molecule verify</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="build-tags">Build Tags<a aria-hidden="true" class="hash-link" href="#build-tags" title="Direct link to heading">​</a></h4><p><code>CRI-O</code> supports optional build tags for compiling support of various features.
To add build tags to the make option the <code>BUILDTAGS</code> variable must be set.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">BUILDTAGS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;seccomp apparmor&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><table><thead><tr><th>Build Tag</th><th>Feature</th><th>Dependency</th></tr></thead><tbody><tr><td>seccomp</td><td>syscall filtering</td><td>libseccomp</td></tr><tr><td>selinux</td><td>selinux process and mount labeling</td><td>libselinux</td></tr><tr><td>apparmor</td><td>apparmor profile support</td><td><none></none></td></tr></tbody></table><p><code>CRI-O</code> manages images with <a href="https://github.com/containers/image" target="_blank" rel="noopener noreferrer">containers/image</a>, which uses the following buildtags.</p><table><thead><tr><th>Build Tag</th><th>Feature</th><th>Dependency</th></tr></thead><tbody><tr><td>containers_image_openpgp</td><td>use native golang pgp instead of cgo</td><td><none></none></td></tr><tr><td>containers_image_ostree_stub</td><td>disable use of ostree as an image transport</td><td><none></none></td></tr></tbody></table><p><code>CRI-O</code> also uses <a href="https://github.com/containers/storage" target="_blank" rel="noopener noreferrer">containers/storage</a> for managing container storage.</p><table><thead><tr><th>Build Tag</th><th>Feature</th><th>Dependency</th></tr></thead><tbody><tr><td>exclude_graphdriver_btrfs</td><td>exclude btrfs as a storage option</td><td><none></none></td></tr><tr><td>btrfs_noversion</td><td>for building btrfs version &lt; 3.16.1</td><td>btrfs</td></tr><tr><td>exclude_graphdriver_devicemapper</td><td>exclude devicemapper as a storage option</td><td><none></none></td></tr><tr><td>libdm_no_deferred_remove</td><td>don&#x27;t compile deferred remove with devicemapper</td><td>devicemapper</td></tr><tr><td>exclude_graphdriver_overlay</td><td>exclude overlay as a storage option</td><td><none></none></td></tr><tr><td>ostree</td><td>build storage using ostree</td><td>ostree</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="static-builds">Static builds<a aria-hidden="true" class="hash-link" href="#static-builds" title="Direct link to heading">​</a></h3><p>It is possible to build a statically linked binary of CRI-O by using the
officially provided <a href="https://nixos.org/nix" target="_blank" rel="noopener noreferrer">nix</a> package and the derivation of
it <a href="/docs/nix">within this repository</a>. The builds are completely reproducible and
will create a <code>x86_64</code>/<code>amd64</code> or <code>aarch64</code>/<code>arm64</code> stripped ELF binary for
<a href="https://www.gnu.org/software/libc" target="_blank" rel="noopener noreferrer">glibc</a>. These binaries are integration
tested as well and support the following features:</p><ul><li>apparmor</li><li>btrfs</li><li>device mapper</li><li>gpgme</li><li>seccomp</li><li>selinux</li></ul><p>To build the binaries locally either <a href="https://nixos.org/nix/download.html" target="_blank" rel="noopener noreferrer">install the nix package
manager</a> or use the <code>make build-static</code>
target which relies on the nixos/nix container image.</p><p>The overall build process can take a tremendous amount of CPU time depending on
the hardware. The resulting binaries should now be available within:</p><ul><li><code>bin/static/crio</code></li></ul><p>To build the binaries without any prepared container and via the already
installed nix package manager, simply run the following command from the root
directory of this repository:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">nix build -f nix</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The resulting binaries should be now available in <code>result/bin</code>. To build the arm
variant of the binaries, just run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">nix build -f nix/default-arm64.nix</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="creating-a-release-archive">Creating a release archive<a aria-hidden="true" class="hash-link" href="#creating-a-release-archive" title="Direct link to heading">​</a></h4><p>A release bundle consists of all static binaries, the man pages and
configuration files like <code>00-default.conf</code>. The <code>release-bundle</code> target can be
used to build a new release archive within the current repository:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">make release-bundle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Created ./bundle/cri-o.amd64.v1.20.0.tar.gz</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="download-conmon">Download conmon<a aria-hidden="true" class="hash-link" href="#download-conmon" title="Direct link to heading">​</a></h3><p><a href="https://github.com/containers/conmon" target="_blank" rel="noopener noreferrer">conmon</a> is a per-container daemon that <code>CRI-O</code> uses to monitor container logs and exit information.
<code>conmon</code> needs to be downloaded with <code>CRI-O</code>.</p><p>running:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/containers/conmon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> conmon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>will download conmon to your $PATH.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setup-cni-networking">Setup CNI networking<a aria-hidden="true" class="hash-link" href="#setup-cni-networking" title="Direct link to heading">​</a></h3><p>A proper description of setting up CNI networking is given in the
<a href="/contrib/cni/README.md"><code>contrib/cni</code> README</a>. But the gist is that you need to
have some basic network configurations enabled and CNI plugins installed on
your system.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cri-o-configuration">CRI-O configuration<a aria-hidden="true" class="hash-link" href="#cri-o-configuration" title="Direct link to heading">​</a></h3><p>If you are installing for the first time, generate and install configuration files with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sudo make install.config</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="validate-registries-in-registriesconf">Validate registries in registries.conf<a aria-hidden="true" class="hash-link" href="#validate-registries-in-registriesconf" title="Direct link to heading">​</a></h3><p>Edit <code>/etc/containers/registries.conf</code> and verify that the registries option has valid values in it.  For example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">[registries.search]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">registries = [&#x27;registry.access.redhat.com&#x27;, &#x27;registry.fedoraproject.org&#x27;, &#x27;quay.io&#x27;, &#x27;docker.io&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[registries.insecure]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">registries = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[registries.block]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">registries = []</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about this file see <a href="https://github.com/containers/image/blob/master/docs/containers-registries.conf.5.md" target="_blank" rel="noopener noreferrer">registries.conf(5)</a>.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="optional---modify-verbosity-of-logs">Optional - Modify verbosity of logs<a aria-hidden="true" class="hash-link" href="#optional---modify-verbosity-of-logs" title="Direct link to heading">​</a></h4><p>Users can modify the <code>log_level</code> by specifying an overwrite like
<code>/etc/crio/crio.conf.d/01-log-level.conf</code> to change the verbosity of
the logs. Options are fatal, panic, error, warn, info (default), debug and
trace.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">[crio.runtime]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log_level = &quot;info&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="optional---modify-capabilities-and-sysctls">Optional - Modify capabilities and sysctls<a aria-hidden="true" class="hash-link" href="#optional---modify-capabilities-and-sysctls" title="Direct link to heading">​</a></h4><p>By default, <code>CRI-O</code> uses the following capabilities:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">default_capabilities = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;CHOWN&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;DAC_OVERRIDE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;FSETID&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;FOWNER&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SETGID&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SETUID&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SETPCAP&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;NET_BIND_SERVICE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;KILL&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>and no sysctls</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">default_sysctls = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Users can change either default by adding overwrites to <code>/etc/crio/crio.conf.d</code>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="starting-cri-o">Starting CRI-O<a aria-hidden="true" class="hash-link" href="#starting-cri-o" title="Direct link to heading">​</a></h3><p>Running make install will download CRI-O into the folder</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/bin/crio</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can run it manually there, or you can set up a systemd unit file with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sudo make install.systemd</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And let systemd take care of running CRI-O:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> crio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start crio</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-cri-o">Using CRI-O<a aria-hidden="true" class="hash-link" href="#using-cri-o" title="Direct link to heading">​</a></h3><ul><li>Follow this <a href="/docs/CNCF Projects/tutorials/crictl.md">tutorial</a> to quickly get started running simple pods and containers.</li><li>To run a full cluster, see <a href="/docs/CNCF Projects/tutorials/kubernetes.md">the instructions</a>.</li><li>To run with kubeadm, see <a href="/docs/CNCF Projects/tutorials/kubeadm.md">kubeadm instructions</a>.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/CNCF Projects/5.22_CNI"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->CNI</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/CNCF Projects/5.24_Falco"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">FALCO<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-kubernetes" class="table-of-contents__link toc-highlight">What is Kubernetes?</a></li><li><a href="#what-is-the-cri-and-why-does-kubernetes-need-it" class="table-of-contents__link toc-highlight">What is the CRI and why does Kubernetes need it?</a></li><li><a href="#what-is-oci" class="table-of-contents__link toc-highlight">What is OCI?</a><ul><li><a href="#oci-compatible-runtimes" class="table-of-contents__link toc-highlight">OCI compatible runtimes</a></li><li><a href="#storage" class="table-of-contents__link toc-highlight">Storage</a></li><li><a href="#container-images" class="table-of-contents__link toc-highlight">Container images</a></li><li><a href="#networking" class="table-of-contents__link toc-highlight">Networking</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">Monitoring</a></li></ul></li><li><a href="#install-packaged-versions-of-cri-o" class="table-of-contents__link toc-highlight">Install packaged versions of CRI-O</a><ul><li><a href="#supported-versions" class="table-of-contents__link toc-highlight">Supported versions</a></li><li><a href="#installation-instructions" class="table-of-contents__link toc-highlight">Installation Instructions</a></li></ul></li><li><a href="#build-and-install-cri-o-from-source" class="table-of-contents__link toc-highlight">Build and install CRI-O from source</a><ul><li><a href="#runtime-dependencies" class="table-of-contents__link toc-highlight">Runtime dependencies</a></li><li><a href="#build-and-run-dependencies" class="table-of-contents__link toc-highlight">Build and Run Dependencies</a></li><li><a href="#get-source-code" class="table-of-contents__link toc-highlight">Get Source Code</a></li><li><a href="#build" class="table-of-contents__link toc-highlight">Build</a></li><li><a href="#static-builds" class="table-of-contents__link toc-highlight">Static builds</a></li><li><a href="#download-conmon" class="table-of-contents__link toc-highlight">Download conmon</a></li><li><a href="#setup-cni-networking" class="table-of-contents__link toc-highlight">Setup CNI networking</a></li><li><a href="#cri-o-configuration" class="table-of-contents__link toc-highlight">CRI-O configuration</a></li><li><a href="#validate-registries-in-registriesconf" class="table-of-contents__link toc-highlight">Validate registries in registries.conf</a></li><li><a href="#starting-cri-o" class="table-of-contents__link toc-highlight">Starting CRI-O</a></li><li><a href="#using-cri-o" class="table-of-contents__link toc-highlight">Using CRI-O</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">OpenSource</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/docsopensource/docsopensource.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/girlscript/winter-of-contributing/graphs/contributors" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Contributors<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">GWOC Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/girlscript/winter-of-contributing" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/girlscriptwoc?t=wQYmJKKM0e6hJI5UllXe4w&amp;s=09" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/girlscript-winter-of-contributing/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Aryamanz29" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Domain Supervisor<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/girlscript/winter-of-contributing" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Winter Of Contributing Repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Made With ❤ By <a href="https://github.com/Aryamanz29"><strong>AryamanZ29</strong> </a> </div></div></div></footer></div>
<script src="/assets/js/runtime~main.a57917b9.js"></script>
<script src="/assets/js/main.53135cbe.js"></script>
</body>
</html>